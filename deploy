helm install --version=4.11.3 nginx-ingress ingress-nginx/ingress-nginx \
  --namespace ingress-nginx \
  --create-namespace \
  --set controller.service.type=LoadBalancer \
  --set controller.service.annotations."cloud\.google\.com/load-balancer-type"=External \
  --set controller.service.annotations."networking\.gke\.io/load-balancer-type"=Pass-through \
  --set controller.service.annotations."cloud\.google\.com/l4-rbs"=enabled\
  --set controller.service.loadBalancerIP="ingress-test-ip" \
  --set controller.service.externalTrafficPolicy=Local \
  --set controller.service.ports.https=443 \
  --set controller.config.ssl-ciphers="ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384" \
  --set controller.config.ssl-protocols="TLSv1.2 TLSv1.3" \
  --set controller.config.ssl-prefer-server-ciphers="on" \
  --set controller.ingressClass=nginx \
  --set controller.ingressClassResource.default=true \
  --set controller.ingressClassResource.name=nginx \
  --set controller.kind=DaemonSet
